<%- include('../port/layoutStart', {title: title}) %>
<%- include('../port/menu') %>

<h1><%= title %></h1>

<a class="btn btn-sm btn-success" href="create/">Добавить книгу</a>

<%  if (library.length) { %>

    <table class="table table-striped table-sm  mt-3">
        <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Обложка</th>
            <th scope="col">Название</th>
            <th scope="col">Авторы</th>
            <th scope="col">Описание</th>
            <th scope="col">Просмотров</th>
            <th scope="col"></th>
        </tr>
        </thead>
        <tbody>

            <% library.map((el, idx) => {  %>
                <tr>
                    <th scope="row"><%= idx + 1 %></th>
                    <td class="w-25">
                        <img src="<%= el.id %>/download/fileCover" class="border rounded w-50" alt="Cover">
                    </td>
                    <td><%= el.title %></td>
                    <td><%= el.authors %></td>
                    <td><%= el.description %></td>
                    <td><%= el.views %></td>
                    <td class="text-right">
                        <a class="btn btn-sm btn-success" href="<%= el.id %>">
                            <i class="bi bi-eye"></i>
                        </a>
                        <a class="btn btn-sm btn-primary" href="update/<%= el.id %>">
                            <i class="bi bi-pencil"></i>
                        </a>
                        <a class="btn btn-sm btn-danger" href="delete/<%= el.id %>">
                            <i class="bi bi-trash3"></i>
                        </a>
                    </td>
                </tr>
            <% }) %>

        </tbody>
    </table>

<% } else { %>
    <h3 class="mt-5">Книг в библиотеке нет</h3>
<% } %>

<%- include('../port/layoutEnd') %>